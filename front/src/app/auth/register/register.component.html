<div class="contenedor">
  <div class="panel-login">
    <div class="container">
      <div class="card p-4 shadow-sm">
        <div class="text-center mb-4">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-briefcase h-6 w-6 text-primary"><path d="M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path><rect width="20" height="14" x="2" y="6" rx="2"></rect></svg>

          <h2 class="mt-2">Personal App</h2>
          <p class="text-muted mt-4">Registro de Usuarios</p>
        </div>

        <form [formGroup]="registerForm" (ngSubmit)="register()">
          <div class="mb-3">
            <label for="username" class="form-label">Usuario</label>
            <input
              id="username"
              type="email"
              class="form-control"
              formControlName="username"
            />
            <div *ngIf="registerForm.controls['username'].invalid && registerForm.controls['username'].touched" class="text-danger mt-2">
              <span *ngIf="registerForm.controls['username'].errors?.['required']">
                El usuario es obligatorio.
              </span>
              <span *ngIf="registerForm.controls['username'].errors?.['email']">
                El correo electrónico no es válido.
              </span>
            </div>

          </div>

          <div class="mb-3">
            <label for="password" class="form-label">Contraseña</label>
            <div class="input-group">
              <input
                [type]="showPassword() ? 'text' : 'password'"
                id="password"
                class="form-control"
                formControlName="password"
              />
              <button type="button" class="btn btn-outline-secondary" (click)="togglePassword()">
                <i class="bi" [ngClass]="showPassword() ? 'bi-eye-slash' : 'bi-eye'"></i>
              </button>
            </div>
            <div *ngIf="registerForm.controls['password'].invalid && registerForm.controls['password'].touched" class="text-danger mt-2">
              La contraseña debe tener al menos 6 caracteres.
            </div>
          </div>

          <div class="mb-3">
            <label for="passwordConfirm" class="form-label">Confirmar Contraseña</label>
            <div class="input-group">
              <input
                [type]="showPassword2() ? 'text' : 'password'"
                id="passwordConfirm"
                class="form-control"
                formControlName="passwordConfirm"
              />
              <button type="button" class="btn btn-outline-secondary" (click)="togglePassword2()">
                <i class="bi" [ngClass]="showPassword2() ? 'bi-eye-slash' : 'bi-eye'"></i>
              </button>
            </div>
            <div *ngIf="registerForm.errors?.['passwordsNotMatching'] && registerForm.controls['passwordConfirm'].touched" class="text-danger mt-2">
              Las contraseñas no coinciden.
            </div>
          </div>

          <div *ngIf="errorMessage()" class="alert alert-danger py-2 text-center">
            {{ errorMessage() }}
          </div>

          <button  *ngIf="registerForm.valid"  type="submit" class="btn btn-primary w-100 mt-2 mb-4">
            Registrarse
          </button>
          <button *ngIf="registerForm.invalid" type="submit" class="btn btn-secondary w-100 mt-2 mb-4" [disabled]="registerForm.invalid">
            Registrarse
          </button>
        </form>

        <div>
          ¿Ya tienes una cuenta?
          <a routerLink="/ingreso"> Ingresa Aquí </a>
        </div>
      </div>
    </div>
  </div>

  <div class="panel-img">
    <img src="https://res.cloudinary.com/dprhyf4s1/image/upload/fl_preserve_transparency/v1741236245/rrhh2_ovmwey.jpg?_s=public-apps" alt="Imagen de fondo">
  </div>
</div>

<p-toast></p-toast>

